




<!DOCTYPE html><html lang="en"
      class="chekov"><head><script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script><meta charset="utf-8"><meta name="xsrf_token" content="E_B6pK0nRLPCyBmLX8YHzKnzo_OlmoPd9OldBWOjROU6MTUxNzg3MjYzMDk3OTE0MA" /><link rel="canonical" href="https://www.tensorflow.org/programmers_guide/debugger"><link rel="alternate" href="https://www.tensorflow.org/programmers_guide/debugger" hreflang="en"><link rel="alternate" href="debugger" hreflang="en-cn"><link rel="alternate" href="https://www.tensorflow.org/programmers_guide/debugger" hreflang="x-default"><link rel="shortcut icon" href="../_static/18908e5f48/images/tensorflow/favicon.png"><link rel="apple-touch-icon" href="../images/apple-touch-icon-180x180.png"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"><link rel="stylesheet"
        href="../_static/18908e5f48/css/devsite-tensorflow-orange.css"><script src="../_static/18908e5f48/js/jquery-bundle.js"></script><meta property="og:site_name" content="TensorFlow"><meta property="og:type" content="website"><meta property="og:url" content="https://www.tensorflow.org/programmers_guide/debugger"><meta property="og:locale" content="en"><script>
    var ___gcfg = ___gcfg || {};
    ___gcfg.lang = 'zh-cn';
  </script><title>Debugging TensorFlow Programs &nbsp;|&nbsp; TensorFlow</title><meta property="og:title" content="Debugging TensorFlow Programs &nbsp;|&nbsp; TensorFlow"></head><body class="
               devsite-doc-page
               
               
               
               
               "
        id="top_of_page"><div class="devsite-wrapper"><div class="devsite-top-section-wrapper
            "><header class="devsite-top-section nocontent"><div class="devsite-top-logo-row-wrapper-wrapper"><div class="devsite-top-logo-row-wrapper"><div class="devsite-top-logo-row devsite-full-site-width"><button type="button" class="devsite-expand-section-nav devsite-header-icon-button
                                       button-flat material-icons gc-analytics-event"
                  data-category="Site-Wide Custom Events" data-label="Hamburger menu"></button><div class="devsite-product-name-wrapper"><a href="../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo"><img src="../_static/18908e5f48/images/tensorflow/lockup.png"
       class="devsite-site-logo" alt="TensorFlow"><span class="devsite-site-name devsite-product-name">TensorFlow</span></a></div><div class="devsite-header-upper-tabs"><nav class="devsite-doc-set-nav devsite-nav devsite-overflow-tabs-scroll-wrapper"><ul class="devsite-doc-set-nav-tab-list devsite-overflow-tabs-scroll"><li class="devsite-doc-set-nav-tab-container"><a href="../install/index"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Install"
       >
        Install
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../get_started/index"
         class="devsite-doc-set-nav-active
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Develop"
       >
        Develop
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../api_docs.1"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: API r1.5"
       >
        API r1.5
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../deploy/index"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Deploy"
       >
        Deploy
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../extend/index.html"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Extend"
       >
        Extend
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../community/index.html"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Community"
       >
        Community
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../versions/index.html"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Versions"
       >
        Versions
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../tfrc/index.html"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: TFRC"
       >
        TFRC
      </a></li></ul></nav></div><form class="devsite-search-form"
                action="https://tensorflow.google.cn/s/results/"
                method="GET"
                id="top-search"
                search-placeholder='搜索'><div id="searchbox" class="devsite-searchbox"><input placeholder='搜索'
         
         type="text"
         class="devsite-search-field devsite-search-query"
         name="q"
         value=""
         autocomplete="off"><div class="devsite-search-image material-icons"></div></div><input type="hidden"
       name="p"
       id="search_project"
       value="/"
       data-project-name="TensorFlow"
       data-project-path="/"
       data-query-match=""><input type="hidden" class="suggest-project" value="TensorFlow" /><div class="suggest-project-metadata" data-home_url="/" data-path="/" data-name="Android Developers" ></div><div class="suggest-project-metadata" data-home_url="/" data-path="/" data-name="Android Open Source Project" ></div><div class="suggest-project-metadata" data-home_url="/" data-path="/" data-name="Google Cloud Platform" ></div><div class="suggest-project-metadata" data-home_url="/" data-path="/" data-name="Dialogflow" ></div><div class="suggest-project-metadata" data-home_url="/" data-path="/" data-name="Firebase" ></div><div class="suggest-project-metadata" data-home_url="/" data-path="/" data-name="Link.app" ></div><div class="suggest-project-metadata" data-home_url="/" data-path="/" data-name="Nest Developers" ></div><div class="suggest-project-metadata" data-home_url="/" data-path="/" data-name="OpenThread" ></div><div class="suggest-project-metadata" data-home_url="/" data-path="/" data-name="TensorFlow" ></div></form><button type="button" class="devsite-search-button devsite-header-icon-button button-flat
                                       material-icons"></button></div></div></div><div class="devsite-collapsible-section"><div class="devsite-header-background devsite-full-site-width"><div class="devsite-product-id-row devsite-full-site-width"><div class="devsite-product-description-row"><ul class="devsite-breadcrumb-list"><li class="devsite-breadcrumb-item">
    
    
    
      Develop
    
    
  </li></ul></div></div><div class="devsite-doc-set-nav-row devsite-full-site-width"><nav class="devsite-doc-set-nav devsite-nav devsite-overflow-tabs-scroll-wrapper"><ul class="devsite-doc-set-nav-tab-list devsite-overflow-tabs-scroll"><li class="devsite-doc-set-nav-tab-container"><a href="../get_started/index"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Get Started"
       >
        Get Started
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="index.html"
         class="devsite-doc-set-nav-active
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Programmer&#39;s Guide"
       >
        Programmer&#39;s Guide
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../tutorials/index.html"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Tutorials"
       >
        Tutorials
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../performance/index.html"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Performance"
       >
        Performance
      </a></li><li class="devsite-doc-set-nav-tab-container"><a href="../mobile/index.html"
         class="
                devsite-doc-set-nav-tab gc-analytics-event"
       
         data-category="Site-Wide Custom Events"
       
         data-label="Tab: Mobile"
       >
        Mobile
      </a></li></ul></nav></div></div></div></header><script>
    if (window.jQuery) {
      $(document).ready(function() {
        if (window.devsite && window.devsite.search) {
          
          window.devsite.search.init('zh-cn')
        }
      });
    }
  </script></div><div id="gc-wrapper"itemscope itemtype="http://schema.org/Article"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;TensorFlow&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-69864048-6&quot;}"><script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "US", "language": {"requested": "zh-cn", "served": "en"}, "projectName": "TensorFlow", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>

      
        <div class="devsite-site-mask"></div>
        
  

<nav class="devsite-nav-responsive devsite-nav nocontent" tabindex="0">
  
  <div class="devsite-nav-responsive-tabs-panel">
    
      
        



<nav class="devsite-nav-responsive-tabs devsite-nav">
  <ul class="devsite-nav-list">
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../install/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Install">
        Install
      </a>
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../get_started/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                devsite-nav-active"
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Develop">
        Develop
      </a>
      
        



<nav class="devsite-nav-responsive-tabs devsite-nav">
  <ul class="devsite-nav-list">
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../get_started/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Get Started">
        Get Started
      </a>
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <span class="devsite-nav-responsive-forward devsite-nav-responsive-tab devsite-nav-title
                   devsite-nav-active gc-analytics-event"
            data-category="Site-Wide Custom Events" data-label="Responsive Tab: Programmer&#39;s Guide"
            tabindex="0">
        Programmer&#39;s Guide
      </span>
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../tutorials/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Tutorials">
        Tutorials
      </a>
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../performance/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Performance">
        Performance
      </a>
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../mobile/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Mobile">
        Mobile
      </a>
      
    
    </li>
  
  
  </ul>
</nav>

      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../api_docs/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: API r1.5">
        API r1.5
      </a>
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../deploy/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Deploy">
        Deploy
      </a>
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../extend/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Extend">
        Extend
      </a>
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../community/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Community">
        Community
      </a>
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../versions/index.html?nav=true"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: Versions">
        Versions
      </a>
      
    
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
    
      <a 
           href="../tfrc/index.html"
         
         class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                "
         data-category="Site-Wide Custom Events" data-label="Responsive Tab: TFRC">
        TFRC
      </a>
      
    
    </li>
  
  
  </ul>
</nav>

      
    
  </div>
  
  
  <div class="devsite-nav-responsive-sidebar-panel">
    
    <div class="devsite-nav-responsive-back" tabindex="0"></div>
    
    <nav class="devsite-nav-responsive-sidebar">
      <ul class="devsite-nav-list"><li class="devsite-nav-item"><a href="index.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Programmer's Guide</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">High Level APIs</span></li><li class="devsite-nav-item"><a href="estimators" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Estimators</a></li><li class="devsite-nav-item"><a href="datasets" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Importing Data</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Low Level APIs</span></li><li class="devsite-nav-item"><a href="low_level_intro" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Introduction</a></li><li class="devsite-nav-item"><a href="../resources/dims_types.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Tensors</a></li><li class="devsite-nav-item"><a href="variables" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Variables</a></li><li class="devsite-nav-item"><a href="graphs" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Graphs and Sessions</a></li><li class="devsite-nav-item"><a href="saved_model" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Saving and Restoring</a></li><li class="devsite-nav-item"><a href="using_gpu" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Using GPUs</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">ML Concepts</span></li><li class="devsite-nav-item"><a href="../how_tos/embedding_viz/index.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Embeddings</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Debugging</span></li><li class="devsite-nav-item devsite-nav-active"><a href="debugger" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Debugging TensorFlow Programs</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">TensorBoard</span></li><li class="devsite-nav-item"><a href="../get_started/summaries_and_tensorboard" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorBoard: Visualizing Learning</a></li><li class="devsite-nav-item"><a href="../get_started/graph_viz" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorBoard: Graph Visualization</a></li><li class="devsite-nav-item"><a href="../get_started/tensorboard_histograms" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorBoard Histogram Dashboard</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Misc</span></li><li class="devsite-nav-item"><a href="version_semantics" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorFlow Version Compatibility</a></li><li class="devsite-nav-item"><a href="faq" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Frequently Asked Questions</a></li><li class="devsite-nav-item"><hr class="devsite-nav-break"></li><li class="devsite-nav-item"><a href="../versions/index.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorFlow Versions</a></li></ul>
    </nav>
  </div>
  
</nav>


        <div class="devsite-main-content clearfix">

        
        

        
  
  
    
    
      
  <nav class="devsite-section-nav devsite-nav nocontent">
    <ul class="devsite-nav-list"><li class="devsite-nav-item"><a href="index.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Programmer's Guide</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">High Level APIs</span></li><li class="devsite-nav-item"><a href="estimators" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Estimators</a></li><li class="devsite-nav-item"><a href="datasets" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Importing Data</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Low Level APIs</span></li><li class="devsite-nav-item"><a href="low_level_intro" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Introduction</a></li><li class="devsite-nav-item"><a href="../resources/dims_types.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Tensors</a></li><li class="devsite-nav-item"><a href="variables" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Variables</a></li><li class="devsite-nav-item"><a href="graphs" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Graphs and Sessions</a></li><li class="devsite-nav-item"><a href="saved_model" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Saving and Restoring</a></li><li class="devsite-nav-item"><a href="using_gpu" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Using GPUs</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">ML Concepts</span></li><li class="devsite-nav-item"><a href="../how_tos/embedding_viz/index.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Embeddings</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Debugging</span></li><li class="devsite-nav-item devsite-nav-active"><a href="debugger" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Debugging TensorFlow Programs</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">TensorBoard</span></li><li class="devsite-nav-item"><a href="../get_started/summaries_and_tensorboard" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorBoard: Visualizing Learning</a></li><li class="devsite-nav-item"><a href="../get_started/graph_viz" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorBoard: Graph Visualization</a></li><li class="devsite-nav-item"><a href="../get_started/tensorboard_histograms" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorBoard Histogram Dashboard</a></li><li class="devsite-nav-item devsite-nav-item-heading"><span class="devsite-nav-title devsite-nav-title-no-path" track-type="leftNav" track-name="expandNavSectionNoLink" track-metadata-position="0">Misc</span></li><li class="devsite-nav-item"><a href="version_semantics" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorFlow Version Compatibility</a></li><li class="devsite-nav-item"><a href="faq" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">Frequently Asked Questions</a></li><li class="devsite-nav-item"><hr class="devsite-nav-break"></li><li class="devsite-nav-item"><a href="../versions/index.html" class="devsite-nav-title gc-analytics-event" track-type="leftNav" track-name="titleLink" track-metadata-position="0" data-category="Site-Wide Custom Events" data-label="Left nav" data-action="click">TensorFlow Versions</a></li></ul>
  </nav>

    

    
  <nav class="devsite-page-nav devsite-nav"></nav>


      <article class="devsite-article">
        <article class="devsite-article-inner">
  
          
  



  
  <nav class="devsite-breadcrumb-nav devsite-nav">
    


<ul class="devsite-breadcrumb-list">
  
  <li class="devsite-breadcrumb-item">
    
    
    <a href="../index.html" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="1">
    
    
      TensorFlow
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="../get_started/index" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="2">
    
    
      Develop
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="index.html" class="devsite-breadcrumb-link gc-analytics-event"
       data-category="Site-Wide Custom Events" data-label="Breadcrumbs"
       data-value="3">
    
    
      Programmer&#39;s Guide
    
    
    </a>
    
  </li>
  
</ul>

  </nav>
  
  
  <h1 itemprop="name" class="devsite-page-title">
    Debugging TensorFlow Programs
  </h1>
  
  
  <nav class="devsite-page-nav-embedded devsite-nav"></nav>
  
  <div class="devsite-article-body clearfix
            "
       itemprop="articleBody">
    
<script src="../_static/18908e5f48/js/managed/mathjax/MathJax.js?config=TeX-AMS-MML_SVG"></script>

<!-- DO NOT EDIT! Automatically generated file. -->


<!-- [comment]: TODO(barryr): Links to and from sections on "Graphs" & "Monitoring Learning". -->

<p>TensorFlow debugger (<strong>tfdbg</strong>) is a specialized debugger for TensorFlow. It
lets you view the internal structure and states of running TensorFlow graphs
during training and inference, which is difficult to debug with general-purpose
debuggers such as Python's <code>pdb</code> due to TensorFlow's computation-graph paradigm.</p>
<blockquote>
<p>NOTE: TensorFlow debugger uses a
<a href="https://en.wikipedia.org/wiki/Curses_(programming_library)">curses</a>-based
text user interface. On Mac OS X, the <code>ncurses</code> library is required and can
be installed with <code>brew install homebrew/dupes/ncurses</code>. On Windows, curses
isn't as well supported, so a
<a href="https://en.wikipedia.org/wiki/GNU_Readline">readline</a>-based interface can
be used with tfdbg by installing <code>pyreadline</code> with pip.
If you use Anaconda3, you can install it with a command
such as <code>"C:\Program Files\Anaconda3\Scripts\pip.exe" install pyreadline</code>.
Unofficial Windows curses packages can be downloaded
<a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#curses">here</a>, then subsequently
installed using <code>pip install &lt;your_version&gt;.whl</code>, however curses on Windows
may not work as reliably as curses on Linux or Mac.</p>
</blockquote>
<p>This tutorial demonstrates how to use the <strong>tfdbg</strong> command-line interface
(CLI) to debug the appearance of <a href="https://en.wikipedia.org/wiki/NaN"><code>nan</code>s</a>
and <a href="https://en.wikipedia.org/wiki/Infinity"><code>inf</code>s</a>, a frequently-encountered
type of bug in TensorFlow model development.
The following example is for users who use the low-level
<a href="../api_docs/python/tf/Session"><code>Session</code></a> API of
TensorFlow. A later section of this document describes how to use <strong>tfdbg</strong>
with a higher-level API, namely tf-learn <code>Estimator</code>s and <code>Experiment</code>s.
To <em>observe</em> such an issue, run the following command without the debugger (the
source code can be found
<a href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/debug/examples/debug_mnist.py">here</a>):</p>
<pre class="prettyprint lang-none"><code>python -m tensorflow.python.debug.examples.debug_mnist
</code></pre>

<p>This code trains a simple neural network for MNIST digit image recognition.
Notice that the accuracy increases slightly after the first training step, but
then gets stuck at a low (near-chance) level:</p>
<pre class="prettyprint lang-none"><code>Accuracy at step 0: 0.1113
Accuracy at step 1: 0.3183
Accuracy at step 2: 0.098
Accuracy at step 3: 0.098
Accuracy at step 4: 0.098
</code></pre>

<p>Wondering what might have gone wrong, you suspect that certain nodes in the
training graph generated bad numeric values such as <code>inf</code>s and <code>nan</code>s, because
this is a common cause of this type of training failure.
Let's use tfdbg to debug this issue and pinpoint the exact graph node where this
numeric problem first surfaced.</p>
<h2 id="wrapping_tensorflow_sessions_with_tfdbg">Wrapping TensorFlow Sessions with tfdbg</h2>
<p>To add support for tfdbg in our example, all that is needed is to add the
following lines of code and wrap the Session object with a debugger wrapper.
This code is already added in
<a href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/debug/examples/debug_mnist.py">debug_mnist.py</a>,
so you can activate tfdbg CLI with the <code>--debug</code> flag at the command line.</p>
<pre class="prettyprint lang-python"><code># Let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py&quot;
# (You don't need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

sess = tf_debug.LocalCLIDebugWrapperSession(sess)
</code></pre>

<p>This wrapper has the same interface as Session, so enabling debugging requires
no other changes to the code. The wrapper provides additional features,
including:</p>
<ul>
<li>Bringing up a CLI before and after <code>Session.run()</code> calls, to let you
control the execution and inspect the graph's internal state.</li>
<li>Allowing you to register special <code>filters</code> for tensor values, to facilitate
the diagnosis of issues.</li>
</ul>
<p>In this example, we have already registered a tensor filter called
<a href="../api_docs/python/tfdbg/has_inf_or_nan"><code>tfdbg.has_inf_or_nan</code></a>,
which simply determines if there are any <code>nan</code> or <code>inf</code> values in any
intermediate tensors (tensors that are neither inputs or outputs of the
<code>Session.run()</code> call, but are in the path leading from the inputs to the
outputs). This filter is for <code>nan</code>s and <code>inf</code>s is a common enough use case that
we ship it with the
<a href="../api_guides/python/tfdbg#Classes_for_debug_dump_data_and_directories"><code>debug_data</code></a>
module.</p>
<aside class="note"><strong>Note:</strong><span> You can also write your own custom filters. See
the <a href="../api_docs/python/tfdbg/DebugDumpDir#find">API documentation</a>
of <code>DebugDumpDir.find()</code> for additional information.</span></aside>
<h2 id="debugging_model_training_with_tfdbg">Debugging Model Training with tfdbg</h2>
<p>Let's try training the model again, but with the <code>--debug</code> flag added this time:</p>
<pre class="prettyprint lang-none"><code>python -m tensorflow.python.debug.examples.debug_mnist --debug
</code></pre>

<p>The debug wrapper session will prompt you when it is about to execute the first
<code>Session.run()</code> call, with information regarding the fetched tensor and feed
dictionaries displayed on the screen.</p>
<p><img alt="tfdbg run-start UI" src="../images/tfdbg_screenshot_run_start.png" /></p>
<p>This is what we refer to as the <em>run-start CLI</em>. It lists the feeds and fetches
to the current <code>Session.run</code> call, before executing anything.</p>
<p>If the screen size is too small to display the content of the message in its
entirety, you can resize it.</p>
<p>Use the <strong>PageUp</strong> / <strong>PageDown</strong> / <strong>Home</strong> / <strong>End</strong> keys to navigate the
screen output. On most keyboards lacking those keys <strong>Fn + Up</strong> /
<strong>Fn + Down</strong> / <strong>Fn + Right</strong> / <strong>Fn + Left</strong> will work.</p>
<p>Enter the <code>run</code> command (or just <code>r</code>) at the command prompt:</p>
<pre class="prettyprint"><code>tfdbg&gt; run
</code></pre>

<p>The <code>run</code> command causes tfdbg to execute until the end of the next
<code>Session.run()</code> call, which calculates the model's accuracy using a test data
set. tfdbg augments the runtime Graph to dump all intermediate tensors.
After the run ends, tfdbg displays all the dumped tensors values in the
<em>run-end CLI</em>. For example:</p>
<p><img alt="tfdbg run-end UI: accuracy" src="../images/tfdbg_screenshot_run_end_accuracy.png" /></p>
<p>This list of tensors can also be obtained by running the command <code>lt</code> after you
executed <code>run</code>.</p>
<h3 id="tfdbg_cli_frequently-used_commands">tfdbg CLI Frequently-Used Commands</h3>
<p>Try the following commands at the <code>tfdbg&gt;</code> prompt (referencing the code at
<code>tensorflow/python/debug/examples/debug_mnist.py</code>):</p>
<table>
<thead>
<tr>
<th align="left">Command</th>
<th align="left">Syntax or Option</th>
<th align="left">Explanation</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><strong><code>lt</code></strong></td>
<td align="left"></td>
<td align="left"><strong>List dumped tensors.</strong></td>
<td align="left"><code>lt</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-n &lt;name_pattern&gt;</code></td>
<td align="left">List dumped tensors with names matching given regular-expression pattern.</td>
<td align="left"><code>lt -n Softmax.*</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-t &lt;op_pattern&gt;</code></td>
<td align="left">List dumped tensors with op types matching given regular-expression pattern.</td>
<td align="left"><code>lt -t MatMul</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-f &lt;filter_name&gt;</code></td>
<td align="left">List only the tensors that pass a registered tensor filter.</td>
<td align="left"><code>lt -f has_inf_or_nan</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-s &lt;sort_key&gt;</code></td>
<td align="left">Sort the output by given <code>sort_key</code>, whose possible values are <code>timestamp</code> (default), <code>dump_size</code>, <code>op_type</code> and <code>tensor_name</code>.</td>
<td align="left"><code>lt -s dump_size</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-r</code></td>
<td align="left">Sort in reverse order.</td>
<td align="left"><code>lt -r -s dump_size</code></td>
</tr>
<tr>
<td align="left"><strong><code>pt</code></strong></td>
<td align="left"></td>
<td align="left"><strong>Print value of a dumped tensor.</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>pt &lt;tensor&gt;</code></td>
<td align="left">Print tensor value.</td>
<td align="left"><code>pt hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>pt &lt;tensor&gt;[slicing]</code></td>
<td align="left">Print a subarray of tensor, using <a href="http://www.numpy.org/">numpy</a>-style array slicing.</td>
<td align="left"><code>pt hidden/Relu:0[0:50,:]</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-a</code></td>
<td align="left">Print the entirety of a large tensor, without using ellipses. (May take a long time for large tensors.)</td>
<td align="left"><code>pt -a hidden/Relu:0[0:50,:]</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-r &lt;range&gt;</code></td>
<td align="left">Highlight elements falling into specified numerical range. Multiple ranges can be used in conjunction.</td>
<td align="left"><code>pt hidden/Relu:0 -a -r [[-inf,-1],[1,inf]]</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-n &lt;number&gt;</code></td>
<td align="left">Print dump corresponding to specified 0-based dump number. Required for tensors with multiple dumps.</td>
<td align="left"><code>pt -n 0 hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-s</code></td>
<td align="left">Include a summary of the numeric values of the tensor (applicable only to non-empty tensors with Boolean and numeric types such as <code>int*</code> and <code>float*</code>.)</td>
<td align="left"><code>pt -s hidden/Relu:0[0:50,:]</code></td>
</tr>
<tr>
<td align="left"><strong><code>@[coordinates]</code></strong></td>
<td align="left"></td>
<td align="left">Navigate to specified element in <code>pt</code> output.</td>
<td align="left"><code>@[10,0]</code> or <code>@10,0</code></td>
</tr>
<tr>
<td align="left"><strong><code>/regex</code></strong></td>
<td align="left"></td>
<td align="left"><a href="https://linux.die.net/man/1/less">less</a>-style search for given regular expression.</td>
<td align="left"><code>/inf</code></td>
</tr>
<tr>
<td align="left"><strong><code>/</code></strong></td>
<td align="left"></td>
<td align="left">Scroll to the next line with matches to the searched regex (if any).</td>
<td align="left"><code>/</code></td>
</tr>
<tr>
<td align="left"><strong><code>pf</code></strong></td>
<td align="left"></td>
<td align="left"><strong>Print a value in the feed_dict to <code>Session.run</code>.</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>pf &lt;feed_tensor_name&gt;</code></td>
<td align="left">Print the value of the feed. Also note that the <code>pf</code> command has the <code>-a</code>, <code>-r</code> and <code>-s</code> flags (not listed below), which have the same syntax and semantics as the identically-named flags of <code>pt</code>.</td>
<td align="left"><code>pf input_xs:0</code></td>
</tr>
<tr>
<td align="left"><strong>eval</strong></td>
<td align="left"></td>
<td align="left"><strong>Evaluate arbitrary Python and numpy expression.</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>eval &lt;expression&gt;</code></td>
<td align="left">Evaluate a Python / numpy expression, with numpy available as <code>np</code> and debug tensor names enclosed in backticks.</td>
<td align="left"><code>eval "np.matmul((`output/Identity:0` / `Softmax:0`).T, `Softmax:0`)"</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-a</code></td>
<td align="left">Print a large-sized evaluation result in its entirety, i.e., without using ellipses.</td>
<td align="left"><code>eval -a 'np.sum(`Softmax:0`, axis=1)'</code></td>
</tr>
<tr>
<td align="left"><strong><code>ni</code></strong></td>
<td align="left"></td>
<td align="left"><strong>Display node information.</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-a</code></td>
<td align="left">Include node attributes in the output.</td>
<td align="left"><code>ni -a hidden/Relu</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-d</code></td>
<td align="left">List the debug dumps available from the node.</td>
<td align="left"><code>ni -d hidden/Relu</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-t</code></td>
<td align="left">Display the Python stack trace of the node's creation.</td>
<td align="left"><code>ni -t hidden/Relu</code></td>
</tr>
<tr>
<td align="left"><strong><code>li</code></strong></td>
<td align="left"></td>
<td align="left"><strong>List inputs to node</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-r</code></td>
<td align="left">List the inputs to node, recursively (the input tree.)</td>
<td align="left"><code>li -r hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-d &lt;max_depth&gt;</code></td>
<td align="left">Limit recursion depth under the <code>-r</code> mode.</td>
<td align="left"><code>li -r -d 3 hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-c</code></td>
<td align="left">Include control inputs.</td>
<td align="left"><code>li -c -r hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-t</code></td>
<td align="left">Show op types of input nodes.</td>
<td align="left"><code>li -t -r hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"><strong><code>lo</code></strong></td>
<td align="left"></td>
<td align="left"><strong>List output recipients of node</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-r</code></td>
<td align="left">List the output recipients of node, recursively (the output tree.)</td>
<td align="left"><code>lo -r hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-d &lt;max_depth&gt;</code></td>
<td align="left">Limit recursion depth under the <code>-r</code> mode.</td>
<td align="left"><code>lo -r -d 3 hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-c</code></td>
<td align="left">Include recipients via control edges.</td>
<td align="left"><code>lo -c -r hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-t</code></td>
<td align="left">Show op types of recipient nodes.</td>
<td align="left"><code>lo -t -r hidden/Relu:0</code></td>
</tr>
<tr>
<td align="left"><strong><code>ls</code></strong></td>
<td align="left"></td>
<td align="left"><strong>List Python source files involved in node creation.</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-p &lt;path_pattern&gt;</code></td>
<td align="left">Limit output to source files matching given regular-expression path pattern.</td>
<td align="left"><code>ls -p .*debug_mnist.*</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-n</code></td>
<td align="left">Limit output to node names matching given regular-expression pattern.</td>
<td align="left"><code>ls -n Softmax.*</code></td>
</tr>
<tr>
<td align="left"><strong><code>ps</code></strong></td>
<td align="left"></td>
<td align="left"><strong>Print Python source file.</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>ps &lt;file_path&gt;</code></td>
<td align="left">Print given Python source file source.py, with the lines annotated with the nodes created at each of them (if any).</td>
<td align="left"><code>ps /path/to/source.py</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-t</code></td>
<td align="left">Perform annotation with respect to Tensors, instead of the default, nodes.</td>
<td align="left"><code>ps -t /path/to/source.py</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-b &lt;line_number&gt;</code></td>
<td align="left">Annotate source.py beginning at given line.</td>
<td align="left"><code>ps -b 30 /path/to/source.py</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-m &lt;max_elements&gt;</code></td>
<td align="left">Limit the number of elements in the annotation for each line.</td>
<td align="left"><code>ps -m 100 /path/to/source.py</code></td>
</tr>
<tr>
<td align="left"><strong><code>run</code></strong></td>
<td align="left"></td>
<td align="left"><strong>Proceed to the next Session.run()</strong></td>
<td align="left"><code>run</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-n</code></td>
<td align="left">Execute through the next <code>Session.run</code> without debugging, and drop to CLI right before the run after that.</td>
<td align="left"><code>run -n</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-t &lt;T&gt;</code></td>
<td align="left">Execute <code>Session.run</code> <code>T - 1</code> times without debugging, followed by a run with debugging. Then drop to CLI right after the debugged run.</td>
<td align="left"><code>run -t 10</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-f &lt;filter_name&gt;</code></td>
<td align="left">Continue executing <code>Session.run</code> until any intermediate tensor triggers the specified Tensor filter (causes the filter to return <code>True</code>).</td>
<td align="left"><code>run -f has_inf_or_nan</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>--node_name_filter &lt;pattern&gt;</code></td>
<td align="left">Execute the next <code>Session.run</code>, watching only nodes with names matching the given regular-expression pattern.</td>
<td align="left"><code>run --node_name_filter Softmax.*</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>--op_type_filter &lt;pattern&gt;</code></td>
<td align="left">Execute the next <code>Session.run</code>, watching only nodes with op types matching the given regular-expression pattern.</td>
<td align="left"><code>run --op_type_filter Variable.*</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>--tensor_dtype_filter &lt;pattern&gt;</code></td>
<td align="left">Execute the next <code>Session.run</code>, dumping only Tensors with data types (<code>dtype</code>s) matching the given regular-expression pattern.</td>
<td align="left"><code>run --tensor_dtype_filter int.*</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>-p</code></td>
<td align="left">Execute the next <code>Session.run</code> call in profiling mode.</td>
<td align="left"><code>run -p</code></td>
</tr>
<tr>
<td align="left"><strong><code>ri</code></strong></td>
<td align="left"></td>
<td align="left"><strong>Display information about the run the current run, including fetches and feeds.</strong></td>
<td align="left"><code>ri</code></td>
</tr>
<tr>
<td align="left"><strong><code>config</code></strong></td>
<td align="left"></td>
<td align="left"><strong>Set or show persistent TFDBG UI configuration.</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>set</code></td>
<td align="left">Set the value of a config item: {<code>graph_recursion_depth</code>, <code>mouse_mode</code>}.</td>
<td align="left"><code>config set graph_recursion_depth 3</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>show</code></td>
<td align="left">Show current persistent UI configuration.</td>
<td align="left"><code>config show</code></td>
</tr>
<tr>
<td align="left"><strong><code>help</code></strong></td>
<td align="left"></td>
<td align="left"><strong>Print general help information</strong></td>
<td align="left"><code>help</code></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>help &lt;command&gt;</code></td>
<td align="left">Print help for given command.</td>
<td align="left"><code>help lt</code></td>
</tr>
</tbody>
</table>
<p>Note that each time you enter a command, a new screen output
will appear. This is somewhat analogous to web pages in a browser. You can
navigate between these screens by clicking the <code>&lt;--</code> and
<code>--&gt;</code> text arrows near the top-left corner of the CLI.</p>
<h3 id="other_features_of_the_tfdbg_cli">Other Features of the tfdbg CLI</h3>
<p>In addition to the commands listed above, the tfdbg CLI provides the following
addditional features:</p>
<ul>
<li>To navigate through previous tfdbg commands, type in a few characters
    followed by the Up or Down arrow keys. tfdbg will show you the history of
    commands that started with those characters.</li>
<li>To navigate through the history of screen outputs, do either of the
    following:<ul>
<li>Use the <code>prev</code> and <code>next</code> commands.</li>
<li>Click underlined <code>&lt;--</code> and <code>--&gt;</code> links near the top left corner of the
  screen.</li>
</ul>
</li>
<li>Tab completion of commands and some command arguments.</li>
<li>To redirect the screen output to a file instead of the screen, end the
    command with bash-style redirection. For example, the following command
    redirects the output of the pt command to the <code>/tmp/xent_value_slices.txt</code>
    file:</li>
</ul>
<blockquote>
<pre class="prettyprint notranslate" translate="no"><code>tfdbg&gt; pt cross_entropy/Log:0[:, 0:10] &gt; /tmp/xent_value_slices.txt
</code></pre>
</blockquote>
<h3 id="finding_nans_and_infs">Finding <code>nan</code>s and <code>inf</code>s</h3>
<p>In this first <code>Session.run()</code> call, there happen to be no problematic numerical
values. You can move on to the next run by using the command <code>run</code> or its
shorthand <code>r</code>.</p>
<blockquote>
<p>TIP: If you enter <code>run</code> or <code>r</code> repeatedly, you will be able to move through
the <code>Session.run()</code> calls in a sequential manner.</p>
<p>You can also use the <code>-t</code> flag to move ahead a number of <code>Session.run()</code> calls
at a time, for example:</p>
<pre class="prettyprint notranslate" translate="no"><code>tfdbg&gt; run -t 10
</code></pre>
</blockquote>
<p>Instead of entering <code>run</code> repeatedly and manually searching for <code>nan</code>s and
<code>inf</code>s in the run-end UI after every <code>Session.run()</code> call (for example, by using
the <code>pt</code> command shown in the table above) , you can use the following
command to let the debugger repeatedly execute <code>Session.run()</code> calls without
stopping at the run-start or run-end prompt, until the first <code>nan</code> or <code>inf</code>
value shows up in the graph. This is analogous to <em>conditional breakpoints</em> in
some procedural-language debuggers:</p>
<pre class="prettyprint lang-none"><code>tfdbg&gt; run -f has_inf_or_nan
</code></pre>

<blockquote>
<p>NOTE: The preceding command works properly because a tensor filter called
<code>has_inf_or_nan</code> has been registered for you when the wrapped session is
created. This filter detects <code>nan</code>s and <code>inf</code>s (as explained previously).
If you have registered any other filters, you can
use "run -f" to have tfdbg run until any tensor triggers that filter (cause
the filter to return True).</p>
<pre class="prettyprint notranslate" translate="no"><code>def my_filter_callable(datum, tensor):
  # A filter that detects zero-valued scalars.
  return len(tensor.shape) == 0 and tensor == 0.0

sess.add_tensor_filter('my_filter', my_filter_callable)
</code></pre>
<p>Then at the tfdbg run-start prompt run until your filter is triggered:</p>
<pre class="prettyprint notranslate" translate="no"><code>tfdbg&gt; run -f my_filter
</code></pre>
</blockquote>
<p>See <a href="../api_docs/python/tfdbg/DebugDumpDir#find">this API document</a>
for more information on the expected signature and return value of the predicate
<code>Callable</code> used with <code>add_tensor_filter()</code>.</p>
<p><img alt="tfdbg run-end UI: infs and nans" src="../images/tfdbg_screenshot_run_end_inf_nan.png" /></p>
<p>As the screen display indicates on the first line, the <code>has_inf_or_nan</code> filter is first triggered
during the fourth <code>Session.run()</code> call: an
<a href="../api_docs/python/tf/train/AdamOptimizer">Adam optimizer</a>
forward-backward training pass on the graph. In this run, 36 (out of the total
95) intermediate tensors contain <code>nan</code> or <code>inf</code> values. These tensors are listed
in chronological order, with their timestamps displayed on the left. At the top
of the list, you can see the first tensor in which the bad numerical values
first surfaced: <code>cross_entropy/Log:0</code>.</p>
<p>To view the value of the tensor, click the underlined tensor name
<code>cross_entropy/Log:0</code> or enter the equivalent command:</p>
<pre class="prettyprint lang-none"><code>tfdbg&gt; pt cross_entropy/Log:0
</code></pre>

<p>Scroll down a little and you will notice some scattered <code>inf</code> values. If the
instances of <code>inf</code> and <code>nan</code> are difficult to spot by eye, you can use the
following command to perform a regex search and highlight the output:</p>
<pre class="prettyprint lang-none"><code>tfdbg&gt; /inf
</code></pre>

<p>Or, alternatively:</p>
<pre class="prettyprint lang-none"><code>tfdbg&gt; /(inf|nan)
</code></pre>

<p>You can also use the <code>-s</code> or <code>--numeric_summary</code> command to get a quick summary
of the types of numeric values in the tensor:</p>
<pre class="prettyprint lang-none"><code>tfdbg&gt; pt -s cross_entropy/Log:0
</code></pre>

<p>From the summary, you can see that several of the 1000 elements of the
<code>cross_entropy/Log:0</code> tensor are <code>-inf</code>s (negative infinities).</p>
<p>Why did these infinities appear? To further debug, display more information
about the node <code>cross_entropy/Log</code> by clicking the underlined <code>node_info</code> menu
item on the top or entering the equivalent node_info (<code>ni</code>) command:</p>
<pre class="prettyprint lang-none"><code>tfdbg&gt; ni cross_entropy/Log
</code></pre>

<p><img alt="tfdbg run-end UI: infs and nans" src="../images/tfdbg_screenshot_run_end_node_info.png" /></p>
<p>You can see that this node has the op type <code>Log</code>
and that its input is the node <code>softmax/Softmax</code>. Run the following command to
take a closer look at the input tensor:</p>
<pre class="prettyprint lang-none"><code>tfdbg&gt; pt softmax/Softmax:0
</code></pre>

<p>Examine the values in the input tensor, searching for zeros:</p>
<pre class="prettyprint lang-none"><code>tfdbg&gt; /0\.000
</code></pre>

<p>Indeed, there are zeros. Now it is clear that the origin of the bad numerical
values is the node <code>cross_entropy/Log</code> taking logs of zeros. To find out the
culprit line in the Python source code, use the <code>-t</code> flag of the <code>ni</code> command
to show the traceback of the node's construction:</p>
<pre class="prettyprint lang-none"><code>tfdbg&gt; ni -t cross_entropy/Log
</code></pre>

<p>If you click "node_info" at the top of the screen, tfdbg automatically shows the
traceback of the node's construction.</p>
<p>From the traceback, you can see that the op is constructed at the following
line:
<a href="https://www.github.com/tensorflow/tensorflow/blob/r1.5/tensorflow/python/debug/examples/debug_mnist.py"><code>debug_mnist.py</code></a>:</p>
<pre class="prettyprint lang-python"><code>diff = y_ * tf.log(y)
</code></pre>

<p><strong>tfdbg</strong> has a feature that makes it easy to trace Tensors and ops back to
lines in Python source files. It can annotate lines of a Python file with
the ops or Tensors created by them. To use this feature,
simply click the underlined line numbers in the stack trace output of the
<code>ni -t &lt;op_name&gt;</code> commands, or use the <code>ps</code> (or <code>print_source</code>) command such as:
<code>ps /path/to/source.py</code>. For example, the following screenshot shows the output
of a <code>ps</code> command.</p>
<p><img alt="tfdbg run-end UI: annotated Python source file" src="../images/tfdbg_screenshot_run_end_annotated_source.png" /></p>
<h3 id="fixing_the_problem">Fixing the problem</h3>
<p>To fix the problem, edit <code>debug_mnist.py</code>, changing the original line:</p>
<pre class="prettyprint lang-python"><code>diff = -(y_ * tf.log(y))
</code></pre>

<p>to the built-in, numerically-stable implementation of softmax cross-entropy:</p>
<pre class="prettyprint lang-python"><code>diff = tf.losses.sparse_softmax_cross_entropy(labels=y_, logits=logits)
</code></pre>

<p>Rerun with the <code>--debug</code> flag as follows:</p>
<pre class="prettyprint lang-none"><code>python -m tensorflow.python.debug.examples.debug_mnist --debug
</code></pre>

<p>At the <code>tfdbg&gt;</code> prompt, enter the following command:</p>
<pre class="prettyprint lang-none"><code>run -f has_inf_or_nan`
</code></pre>

<p>Confirm that no tensors are flagged as containing <code>nan</code> or <code>inf</code> values, and
accuracy now continues to rise rather than getting stuck. Success!</p>
<h2 id="debugging_tf-learn_estimators_and_experiments">Debugging tf-learn Estimators and Experiments</h2>
<p>This section explains how to debug TensorFlow programs that use the <code>Estimator</code>
and <code>Experiment</code> APIs. Part of the convenience provided by these APIs is that
they manage <code>Session</code>s internally. This makes the <code>LocalCLIDebugWrapperSession</code>
described in the preceding sections inapplicable. Fortunately, you can still
debug them by using special <code>hook</code>s provided by <code>tfdbg</code>.</p>
<h3 id="debugging_tfcontriblearn_estimators">Debugging tf.contrib.learn Estimators</h3>
<p>Currently, <code>tfdbg</code> can debug the
<a href="../api_docs/python/tf/contrib/learn/BaseEstimator#fit"><code>fit()</code></a>
<a href="../api_docs/python/tf/contrib/learn/BaseEstimator#evaluate"><code>evaluate()</code></a>
methods of tf-learn <code>Estimator</code>s. To debug <code>Estimator.fit()</code>,
create a <code>LocalCLIDebugHook</code> and supply it in the <code>monitors</code> argument. For example:</p>
<pre class="prettyprint lang-python"><code># First, let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py&quot;
# (You don't need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

# Create a LocalCLIDebugHook and use it as a monitor when calling fit().
hooks = [tf_debug.LocalCLIDebugHook()]

classifier.fit(x=training_set.data,
               y=training_set.target,
               steps=1000,
               monitors=hooks)
</code></pre>

<p>To debug <code>Estimator.evaluate()</code>, assign hooks to the <code>hooks</code> parameter, as in
the following example:</p>
<pre class="prettyprint lang-python"><code>accuracy_score = classifier.evaluate(x=test_set.data,
                                     y=test_set.target,
                                     hooks=hooks)[&quot;accuracy&quot;]
</code></pre>

<p><a href="https://www.github.com/tensorflow/tensorflow/blob/r1.5/tensorflow/python/debug/examples/debug_tflearn_iris.py">debug_tflearn_iris.py</a>,
based on {$tflearn$tf-learn's iris tutorial}, contains a full example of how to
use the tfdbg with <code>Estimator</code>s. To run this example, do:</p>
<pre class="prettyprint lang-none"><code>python -m tensorflow.python.debug.examples.debug_tflearn_iris --debug
</code></pre>

<h3 id="debugging_tfcontriblearn_experiments">Debugging tf.contrib.learn Experiments</h3>
<p><code>Experiment</code> is a construct in <code>tf.contrib.learn</code> at a higher level than
<code>Estimator</code>.
It provides a single interface for training and evaluating a model. To debug
the <code>train()</code> and <code>evaluate()</code> calls to an <code>Experiment</code> object, you can
use the keyword arguments <code>train_monitors</code> and <code>eval_hooks</code>, respectively, when
calling its constructor. For example:</p>
<pre class="prettyprint lang-python"><code># First, let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py&quot;
# (You don't need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

hooks = [tf_debug.LocalCLIDebugHook()]

ex = experiment.Experiment(classifier,
                           train_input_fn=iris_input_fn,
                           eval_input_fn=iris_input_fn,
                           train_steps=FLAGS.train_steps,
                           eval_delay_secs=0,
                           eval_steps=1,
                           train_monitors=hooks,
                           eval_hooks=hooks)

ex.train()
accuracy_score = ex.evaluate()[&quot;accuracy&quot;]
</code></pre>

<p>To build and run the <code>debug_tflearn_iris</code> example in the <code>Experiment</code> mode, do:</p>
<pre class="prettyprint lang-none"><code>python -m tensorflow.python.debug.examples.debug_tflearn_iris \
    --use_experiment --debug
</code></pre>

<p>The <code>LocalCLIDebugHook</code> also allows you to configure a <code>watch_fn</code> that can be
used to flexibly specify what <code>Tensor</code>s to watch on different <code>Session.run()</code>
calls, as a function of the <code>fetches</code> and <code>feed_dict</code> and other states. See
<a href="../api_docs/python/tfdbg/DumpingDebugWrapperSession#__init__">this API doc</a>
for more details.</p>
<h2 id="debugging_keras_models_with_tfdbg">Debugging Keras Models with TFDBG</h2>
<p>To use TFDBG with <a href="https://keras.io/">Keras</a>, let the Keras backend use
a TFDBG-wrapped Session object. For example, to use the CLI wrapper:</p>
<pre class="prettyprint lang-python"><code>import tensorflow as tf
from keras import backend as keras_backend
from tensorflow.python import debug as tf_debug

keras_backend.set_session(tf_debug.LocalCLIDebugWrapperSession(tf.Session()))

# Define your keras model, called &quot;model&quot;.
model.fit(...)  # This will break into the TFDBG CLI.
</code></pre>

<h2 id="debugging_tf-slim_with_tfdbg">Debugging tf-slim with TFDBG</h2>
<p>TFDBG supports debugging of training and evaluation with
<a href="https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/slim">tf-slim</a>.
As detailed below, training and evaluation require slightly different debugging
workflows.</p>
<h3 id="debugging_training_in_tf-slim">Debugging training in tf-slim</h3>
<p>To debug the training process, provide <code>LocalCLIDebugWrapperSession</code> to the
<code>session_wrapper</code> argument of <code>slim.learning.train()</code>. For example:</p>
<pre class="prettyprint lang-python"><code>import tensorflow as tf
from tensorflow.python import debug as tf_debug

# ... Code that creates the graph and the train_op ...
tf.contrib.slim.learning.train(
    train_op,
    logdir,
    number_of_steps=10,
    session_wrapper=tf_debug.LocalCLIDebugWrapperSession)
</code></pre>

<h3 id="debugging_evaluation_in_tf-slim">Debugging evaluation in tf-slim</h3>
<p>To debug the evaluation process, provide <code>LocalCLIDebugHook</code> to the
<code>hooks</code> argument of <code>slim.evaluation.evaluate_once()</code>. For example:</p>
<pre class="prettyprint lang-python"><code>import tensorflow as tf
from tensorflow.python import debug as tf_debug

# ... Code that creates the graph and the eval and final ops ...
tf.contrib.slim.evaluation.evaluate_once(
    '',
    checkpoint_path,
    logdir,
    eval_op=my_eval_op,
    final_op=my_value_op,
    hooks=[tf_debug.LocalCLIDebugHook()])
</code></pre>

<h2 id="offline_debugging_of_remotely-running_sessions">Offline Debugging of Remotely-Running Sessions</h2>
<p>Often, your model is running on a remote machine or a process that you don't
have terminal access to. To perform model debugging in such cases, you can use
the <code>offline_analyzer</code> binary of <code>tfdbg</code> (described below). It operates on
dumped data directories. This can be done to both the lower-level <code>Session</code> API
and the higher-level <code>Estimator</code> and <code>Experiment</code> APIs.</p>
<h3 id="debugging_remote_tfsessions">Debugging Remote tf.Sessions</h3>
<p>If you interact directly with the <code>tf.Session</code> API in <code>python</code>, you can
configure the <code>RunOptions</code> proto that you call your <code>Session.run()</code> method
with, by using the method <a href="../api_docs/python/tfdbg/watch_graph"><code>tfdbg.watch_graph</code></a>.
This will cause the intermediate tensors and runtime graphs to be dumped to a
shared storage location of your choice when the <code>Session.run()</code> call occurs
(at the cost of slower performance). For example:</p>
<pre class="prettyprint lang-python"><code>from tensorflow.python import debug as tf_debug

# ... Code where your session and graph are set up...

run_options = tf.RunOptions()
tf_debug.watch_graph(
      run_options,
      session.graph,
      debug_urls=[&quot;file:///shared/storage/location/tfdbg_dumps_1&quot;])
# Be sure to specify different directories for different run() calls.

session.run(fetches, feed_dict=feeds, options=run_options)
</code></pre>

<p>Later, in an environment that you have terminal access to (for example, a local
computer that can access the shared storage location specified in the code
above), you can load and inspect the data in the dump directory on the shared
storage by using the <code>offline_analyzer</code> binary of <code>tfdbg</code>. For example:</p>
<pre class="prettyprint lang-none"><code>python -m tensorflow.python.debug.cli.offline_analyzer \
    --dump_dir=/shared/storage/location/tfdbg_dumps_1
</code></pre>

<p>The <code>Session</code> wrapper <code>DumpingDebugWrapperSession</code> offers an easier and more
flexible way to generate file-system dumps that can be analyzed offline.
To use it, simply wrap your session in a <code>tf_debug.DumpingDebugWrapperSession</code>.
For example:</p>
<pre class="prettyprint lang-python"><code># Let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py
# (You don't need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

sess = tf_debug.DumpingDebugWrapperSession(
    sess, &quot;/shared/storage/location/tfdbg_dumps_1/&quot;, watch_fn=my_watch_fn)
</code></pre>

<p>The <code>watch_fn</code> argument accepts a <code>Callable</code> that allows you to configure what
<code>tensor</code>s to watch on different <code>Session.run()</code> calls, as a function of the
<code>fetches</code> and <code>feed_dict</code> to the <code>run()</code> call and other states.</p>
<h3 id="c_and_other_languages">C++ and other languages</h3>
<p>If your model code is written in C++ or other languages, you can also
modify the <code>debug_options</code> field of <code>RunOptions</code> to generate debug dumps that
can be inspected offline. See
<a href="https://www.github.com/tensorflow/tensorflow/blob/r1.5/tensorflow/core/protobuf/debug.proto">the proto definition</a>
for more details.</p>
<h3 id="debugging_remotely-running_tf-learn_estimators_and_experiments">Debugging Remotely-Running tf-learn Estimators and Experiments</h3>
<p>If your remote TensorFlow server runs <code>Estimator</code>s,
you can use the non-interactive <code>DumpingDebugHook</code>. For example:</p>
<pre class="prettyprint lang-python"><code># Let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py
# (You don't need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

hooks = [tf_debug.DumpingDebugHook(&quot;/shared/storage/location/tfdbg_dumps_1&quot;)]
</code></pre>

<p>Then this <code>hook</code> can be used in the same way as the <code>LocalCLIDebugHook</code> examples
described earlier in this document.
As the training and/or evalution of <code>Estimator</code> or <code>Experiment</code>
happens, tfdbg creates directories having the following name pattern:
<code>/shared/storage/location/tfdbg_dumps_1/run_&lt;epoch_timestamp_microsec&gt;_&lt;uuid&gt;</code>.
Each directory corresponds to a <code>Session.run()</code> call that underlies
the <code>fit()</code> or <code>evaluate()</code> call. You can load these directories and inspect
them in a command-line interface in an offline manner using the
<code>offline_analyzer</code> offered by tfdbg. For example:</p>
<pre class="prettyprint lang-bash"><code>python -m tensorflow.python.debug.cli.offline_analyzer \
    --dump_dir=&quot;/shared/storage/location/tfdbg_dumps_1/run_&lt;epoch_timestamp_microsec&gt;_&lt;uuid&gt;&quot;
</code></pre>

<h2 id="frequently_asked_questions">Frequently Asked Questions</h2>
<p><strong>Q</strong>: <em>Do the timestamps on the left side of the <code>lt</code> output reflect actual
       performance in a non-debugging session?</em></p>
<p><strong>A</strong>: No. The debugger inserts additional special-purpose debug nodes to the
       graph to record the values of intermediate tensors. These nodes
       slow down the graph execution. If you are interested in profiling your
       model, check out</p>
<ol>
<li>The profiling mode of tfdbg: <code>tfdbg&gt; run -p</code>.</li>
<li><a href="https://github.com/tensorflow/tensorflow/tree/master/tensorflow/core/profiler">tfprof</a>
      and other profiling tools for TensorFlow.</li>
</ol>
<p><strong>Q</strong>: <em>How do I link tfdbg against my <code>Session</code> in Bazel? Why do I see an
       error such as "ImportError: cannot import name debug"?</em></p>
<p><strong>A</strong>: In your BUILD rule, declare dependencies:
       <code>"//tensorflow:tensorflow_py"</code> and <code>"//tensorflow/python/debug:debug_py"</code>.
       The first is the dependency that you include to use TensorFlow even
       without debugger support; the second enables the debugger.
       Then, In your Python file, add:</p>
<pre class="prettyprint lang-python"><code>from tensorflow.python import debug as tf_debug

# Then wrap your TensorFlow Session with the local-CLI wrapper.
sess = tf_debug.LocalCLIDebugWrapperSession(sess)
</code></pre>

<p><strong>Q</strong>: <em>Does tfdbg help debug runtime errors such as shape mismatches?</em></p>
<p><strong>A</strong>: Yes. tfdbg intercepts errors generated by ops during runtime and presents
       the errors with some debug instructions to the user in the CLI.
       See examples:</p>
<pre class="prettyprint lang-none"><code># Debugging shape mismatch during matrix multiplication.
python -m tensorflow.python.debug.examples.debug_errors \
    --error shape_mismatch --debug

# Debugging uninitialized variable.
python -m tensorflow.python.debug.examples.debug_errors \
    --error uninitialized_variable --debug
</code></pre>

<p><strong>Q</strong>: <em>How can I let my tfdbg-wrapped Sessions or Hooks run the debug mode
only from the main thread?</em></p>
<p><strong>A</strong>:
This is a common use case, in which the <code>Session</code> object is used from multiple
threads concurrently. Typically, the child threads take care of background tasks
such as running enqueue operations. Often, you want to debug only the main
thread (or less frequently, only one of the child threads). You can use the
<code>thread_name_filter</code> keyword argument of <code>LocalCLIDebugWrapperSession</code> to
achieve this type of thread-selective debugging. For example, to debug from the
main thread only, construct a wrapped <code>Session</code> as follows:</p>
<pre class="prettyprint lang-python"><code>sess = tf_debug.LocalCLIDebugWrapperSession(sess, thread_name_filter=&quot;MainThread$&quot;)
</code></pre>

<p>The above example relies on the fact that main threads in Python have the
default name <code>MainThread</code>.</p>
<p><strong>Q</strong>: <em>The model I am debugging is very large. The data dumped by tfdbg
fills up the free space of my disk. What can I do?</em></p>
<p><strong>A</strong>:
You might encounter this problem in any of the following situations:</p>
<ul>
<li>models with many intermediate tensors</li>
<li>very large intermediate tensors</li>
<li>many <a href="../api_docs/python/tf/while_loop"><code>tf.while_loop</code></a> iterations</li>
</ul>
<p>There are three possible workarounds or solutions:</p>
<ul>
<li>The constructors of <code>LocalCLIDebugWrapperSession</code> and <code>LocalCLIDebugHook</code>
   provide a keyword argument, <code>dump_root</code>, to specify the path
   to which tfdbg dumps the debug data. You can use it to let tfdbg dump the
   debug data on a disk with larger free space. For example:</li>
</ul>
<p>``` python
   # For LocalCLIDebugWrapperSession
   sess = tf_debug.LocalCLIDebugWrapperSession(dump_root="/with/lots/of/space")</p>
<p># For LocalCLIDebugHook
   hooks = [tf_debug.LocalCLIDebugHook(dump_root="/with/lots/of/space")]
   <code>``
   Make sure that the directory pointed to by dump_root is empty or nonexistent.
   tfdbg cleans up the dump directories before exiting.
*  Reduce the batch size used during the runs.
*  Use the filtering options of tfdbg's</code>run` command to watch only specific
   nodes in the graph. For example:</p>
<p><code>tfdbg&gt; run --node_name_filter .*hidden.*
   tfdbg&gt; run --op_type_filter Variable.*
   tfdbg&gt; run --tensor_dtype_filter int.*</code></p>
<p>The first command above watches only nodes whose name match the
   regular-expression pattern <code>.*hidden.*</code>. The second command watches only
   operations whose name match the pattern <code>Variable.*</code>. The third one watches
   only the tensors whose dtype match the pattern <code>int.*</code> (e.g., <code>int32</code>).</p>
<p><strong>Q</strong>: <em>Why can't I select text in the tfdbg CLI?</em></p>
<p><strong>A</strong>: This is because the tfdbg CLI enables mouse events in the terminal by
       default. This <a href="https://linux.die.net/man/3/mousemask">mouse-mask</a> mode
       overrides default terminal interactions, including text selection. You
       can re-enable text selection by using the command <code>mouse off</code> or
       <code>m off</code>.</p>
<p><strong>Q</strong>: <em>Why does the tfdbg CLI show no dumped tensors when I debug code like the following?</em></p>
<pre class="prettyprint lang-python"><code>a = tf.ones([10], name=&quot;a&quot;)
b = tf.add(a, a, name=&quot;b&quot;)
sess = tf.Session()
sess = tf_debug.LocalCLIDebugWrapperSession(sess)
sess.run(b)
</code></pre>

<p><strong>A</strong>: The reason why you see no data dumped is because every node in the
       executed TensorFlow graph is constant-folded by the TensorFlow runtime.
       In this exapmle, <code>a</code> is a constant tensor; therefore, the fetched
       tensor <code>b</code> is effectively also a constant tensor. TensorFlow's graph
       optimization folds the graph that contains <code>a</code> and <code>b</code> into a single
       node to speed up future runs of the graph, which is why <code>tfdbg</code> does
       not generate any intermediate tensor dumps. However, if <code>a</code> were a
       <a href="../api_docs/python/tf/Variable"><code>tf.Variable</code></a>, as in the following example:</p>
<pre class="prettyprint lang-python"><code>import numpy as np

a = tf.Variable(np.ones[10], name=&quot;a&quot;)
b = tf.add(a, a, name=&quot;b&quot;)
sess = tf.Session()
sess.run(tf.global_variables_initializer())
sess = tf_debug.LocalCLIDebugWrapperSession(sess)
sess.run(b)
</code></pre>

<p>the constant-folding would not occur and <code>tfdbg</code> should show the intermediate
tensor dumps.</p>

  </div>
  

  
        
  







        
<div class="devsite-content-footer nocontent">
  
  
    <p>Except as otherwise noted, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="https://developers.google.cn/terms/site-policies">Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  

  
    
    <p class="devsite-content-footer-date" itemprop="datePublished"
       content="2018-01-27T01:30:38.394670">
      
      上次更新日期：一月 27, 2018
    </p>
  

</div>

        </article>
      </article>
  

        </div>
      

<footer class="devsite-footer-linkboxes nocontent
               devsite-footer-linkboxes-all-backup
               "><nav class="devsite-full-site-width"><ul class="devsite-footer-linkboxes-list"><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">把握动态</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://research.googleblog.com/search/label/TensorFlow" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Blog Link">
                博客
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://github.com/tensorflow/" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer GitHub Link">
                GitHub
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://twitter.com/tensorflow" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Twitter Link">
                Twitter
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">支持</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://github.com/tensorflow/tensorflow/issues" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Issue Tracker Link">
                问题跟踪器
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://github.com/tensorflow/tensorflow/blob/master/RELEASE.md" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Release Notes Link">
                版本说明
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://stackoverflow.com/questions/tagged/tensorflow" class="gc-analytics-event"
               data-category="Site-Wide Custom Events"
               data-label="Footer Stack Overflow Link">
                Stack Overflow
            </a></li></ul></li></ul></nav></footer><footer class="devsite-utility-footer"><nav class="devsite-utility-footer-nav devsite-nav devsite-full-site-width"><div class="devsite-utility-footer-nav-left"><form class="devsite-utility-footer-language" action="https://tensorflow.google.cn/i18n/setlang/" method="post"><input type="hidden" name="xsrf_token" value="E_B6pK0nRLPCyBmLX8YHzKnzo_OlmoPd9OldBWOjROU6MTUxNzg3MjYzMDk3OTE0MA" /><input type="hidden" name="next" value="/programmers_guide/debugger"><select class="devsite-utility-footer-language-select kd-select" name="language"
                track-type="languageSelector" track-name="click"><option value="en"
                
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="zh-cn"
                track-metadata-selected-language="en">
            English
          </option><option value="zh-cn"
                 selected="selected" 
                track-type="languageSelector" track-name="changed"
                track-metadata-original-language="zh-cn"
                track-metadata-selected-language="zh-cn">
            简体中文
          </option></select></form><span class="devsite-utility-footer-links"><a class="devsite-utility-footer-link gc-analytics-event"
           href="http://www.google.cn/policies/terms/"
           data-category="Site-Wide Custom Events"
           data-label="Footer terms link"
           data-footer-link-id="terms"
           >条款
         </a><a class="devsite-utility-footer-link gc-analytics-event"
           href="http://www.google.cn/policies/privacy/"
           data-category="Site-Wide Custom Events"
           data-label="Footer privacy link"
           data-footer-link-id="privacy"
           
           data-cookie-policy="//www.google.cn/policies/technologies/cookies/"
           >隐私权
         </a></span></div></nav></footer></div><script async defer src="https://www.gstatic.com/feedback/api.js"></script><script src="../_static2/18908e5f48/jsi18n/index.html"></script><script src="../_static/18908e5f48/js/script_foot_closure__zh_cn.js"></script><script src="../_static/18908e5f48/js/script_foot.js"></script><script>
        (function($) {
          
          devsite.devsite.Init($, {'FULL_SITE_SEARCH_ENABLED': 0, 'ENABLE_BLOCKED_VIDEO_PLACEHOLDER': 1, 'VERSION_HASH': '18908e5f48', 'SITE_NAME': 'tensorflow_china', 'HISTORY_ENABLED': 0, 'ENABLE_BLOCKED_LINK_TOOLTIP': 1, 'ALLOWED_HOSTS': ['.android.com', '.anvato.com', '.apigee.com', '.appspot.com', '.dialogflow.com', '.gonglchuangl.net', '.google.cn', '.google.com', '.googleplex.com', '.nest.com', '.openthread.io', '.openweave.io', '.orbitera.com', '.tensorflow.org'], 'BLOCK_RSS_FEEDS': 1, 'SCRIPTSAFE_DOMAIN': 'tensorflow-dot-google-developers.gonglchuangl.net'},
                               '[]','zh-cn',
                               true, '',
                               {"f62218c009ec029abef196bba5aa34cf": true, "098dafe57affddc137df300142652cfd": false, "8e03e230de0bd8a6fe173fdf172e8b3f": true, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "d169d485cf24243a263783dbe42029b1": true, "039e5d84b87fd75807ffb37b7f1bbf2c": true, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true}, '/',
                               'https://tensorflow.google.cn/');
        })(jQuery);

        
        devsite.localInit = function() {
          
        };

      </script><script>
      $('.devsite-utility-footer-language-select').each(function() {
        $(this).change(function(){$('.devsite-utility-footer-language').submit();});
      });
      </script></div><span id="devsite-request-elapsed" data-request-elapsed="327.729940414"></span></body></html>
